function importDB(t){let e=t.getAttribute("data-d");$(".loadingtext").show(),$.ajax({url:base_url+"home/importDB",type:"POST",data:{importdb:!0,file:e},success:function(t){data=JSON.parse(t),"success"===data.data?($(".loadingtext").hide(),show_success("Database uploaded succcessfully.")):(show_error("Opps, unable to import this db."),$(".loadingtext").hide())}})}function removeDBbckup(t){let e=t.getAttribute("data-d");$(".loading").show(),$.ajax({url:base_url+"home/remove_bckupfile",type:"POST",data:{remove:!0,file:e},success:function(t){data=JSON.parse(t),"success"===data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("tr[data-node='"+e+"']").remove()):(alert("Opps, something went wrong."),$(".loading").hide())}})}function readURL(t){if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){$("#invlogo").attr("src",t.target.result)},e.readAsDataURL(t.files[0])}}function removeID(t){$("#accordionid"+t).remove()}function agentF(t){id=t.getAttribute("data-id"),jid=t.getAttribute("id"),allow=$("#"+jid).is(":checked")?"yes":"no",""!==id&&""!==allow&&($(".loading").show(),$.ajax({url:base_url+"agent/allowCfeature",type:"POST",data:{id:id,allow:allow},success:function(t){data=JSON.parse(t),"success"===data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3)):($(".loading").hide(),alert("Unable to allow this time! Try again."))}}))}function editAgent(t){id=t.getAttribute("data-g"),""!==id&&($(".loading").show(),$.ajax({url:base_url+"agent/get_details",type:"POST",data:{id:id},success:function(t){data=JSON.parse(t),"success"==data.data?($("#aname").val(data.a.agent_name),$("#aemail").val(data.a.agent_email),$("#amobile").val(data.a.agent_mobile),$("#aid").val(btoa(data.a.agent_id)),$("#aroll option").each((function(t,e){e.getAttribute("value")==data.a.agent_roll&&e.setAttribute("selected",!0)})),$("#astatus option").each((function(t,e){e.getAttribute("value")==data.a.agent_status&&e.setAttribute("selected",!0)})),$("#afeature option").each((function(t,e){e.getAttribute("value")==data.a.client_access&&e.setAttribute("selected",!0)})),$(".loading").hide(),$("#acancel").show(),$("#aaction").html("Update")):($(".loading").hide(),show_error("Something went wrong!"))}}))}function delAgent(t){let e=t.getAttribute("link"),a=t.getAttribute("g"),s=$("#agentListPopup");$("#selAgent option").each((function(){$(this).attr("value")==a?$(this).hide():$(this).show()})),s.modal("show"),$("#delFinal").attr("link",e)}function delAndT_(t){let e=$("#selAgent").val();if(""!==e){let a=t.getAttribute("link")+"&to="+e;location.href=a}else show_error("Please select agent!")}function deleteLs(t){let e=confirm("It will delete field Parmamently. Do you want to continue?");""!==t&&e&&($(".loading").show(),$.ajax({url:base_url+"option/delete_lead_source",type:"POST",data:{lsid:t},success:function(e){data=JSON.parse(e),"success"==data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("tr[data-fire='l"+t+"']").remove()):alert("Opps something went wrong!")}}))}function editLs(t){""!==t&&($("#lshiddenid").val(t),$("#lead_source").val($("span[data-take='l"+t+"']").text()),$("#lead_source").focus())}function deleteS(t){let e=confirm("It will delete field Parmamently. Do you want to continue?");""!==t&&e&&($(".loading").show(),$.ajax({url:base_url+"option/delete_service",type:"POST",data:{sid:t},success:function(e){data=JSON.parse(e),"success"==data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("tr[data-fire='s"+t+"']").remove()):alert("Opps something went wrong!")}}))}function editS(t){""!==t&&($("#shiddenid").val(t),$("#service_name").val($("span[data-take='s"+t+"']").text()),$("#service_name").focus())}function deleteSt(t){let e=confirm("It will delete field Parmamently. Do you want to continue?");""!==t&&e&&($(".loading").show(),$.ajax({url:base_url+"option/delete_status",type:"POST",data:{stid:t},success:function(e){data=JSON.parse(e),"success"==data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("tr[data-fire='st"+t+"']").remove()):alert("Opps something went wrong!")}}))}function editSt(t){""!==t&&($("#sthiddenid").val(t),$("#status_name").val($("span[data-take='st"+t+"']").text()),$("#status_name").focus())}function deleteLr(t){let e=confirm("It will delete field Parmamently. Do you want to continue?");""!==t&&e&&($(".loading").show(),$.ajax({url:base_url+"option/delete_lost_reason",type:"POST",data:{lrid:t},success:function(e){data=JSON.parse(e),"success"==data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("tr[data-fire='lr"+t+"']").remove()):alert("Opps something went wrong!")}}))}function editLr(t){""!==t&&($("#lrhiddenid").val(t),$("#lost_reason_name").val($("span[data-take='lr"+t+"']").text()),$("#lost_reason_name").focus())}function editEc(t){""!==t&&($("#echiddenid").val(t),$("#expense_category_name").val($("span[data-take='ec"+t+"']").text()),$("#expense_category_name").focus())}function deleteEc(t){let e=confirm("It will delete field Parmamently. Do you want to continue?");""!==t&&e&&($(".loading").show(),$.ajax({url:base_url+"option/delete_expense_category",type:"POST",data:{ecid:t},success:function(e){data=JSON.parse(e),"success"==data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("tr[data-fire='ec"+t+"']").remove()):alert("Opps something went wrong!")}}))}function deleteTs(t){let e=confirm("It will delete field Parmamently. Do you want to continue?");""!==t&&e&&($(".loading").show(),$.ajax({url:base_url+"option/delete_task_status",type:"POST",data:{tsid:t},success:function(e){data=JSON.parse(e),"success"==data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("tr[data-fire='ts"+t+"']").remove()):alert("Opps something went wrong!")}}))}function editTs(t){""!==t&&($("#tshiddenid").val(t),$("#task_status_name").val($("span[data-take='ts"+t+"']").text()),$("#task_status_name").focus())}function fireFS(){let t=$("#followup_status").val(),e=$("#followup_status option:selected").text();"5"==t||"lost"==e.toLowerCase()?$("#lost_reason_id").show():$("#lost_reason_id").hide(),"lost"==e.toLowerCase()||"won"==e.toLowerCase()?($("#followup_date").removeAttr("required"),$("#followup_desc").removeAttr("required"),$("#followup_date").val(""),$("#followup_desc").val("")):($("#followup_date").attr("required","true"),$("#followup_desc").attr("required","true"))}function add_more_option(){let t="",e=Math.floor(1e3*Math.random(0,100));t+='<tr id="id'+e+'">',t+='<td><input type="text" name="option_value_name[]" class="form-control" placeholder="Option value name" required=""></td>',t+="<td>",t+='<button type="button" onclick="removeOption(\'id'+e+'\')" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>',t+="</td>",t+="</tr>",$("#options").append(t)}function removeOption(t){$("#"+t).remove()}function enableDrag(t,e){$("#"+t).toggleClass("drag_enable");let a=e.getAttribute("id");$("#"+t).hasClass("drag_enable")?($(".drag_enable").rowSorter({onDrop:function(t,e,a,s){let o=t.getAttribute("id");$("#"+o+" > tr").each(((t,e)=>{let a=e.getAttribute("data-of");$("tr[data-of='"+a+"'] input[name='index[]']").val(t)}))}}),$("#"+a).html("Disable Drag")):($.rowSorter.destroy("#"+t),$("#"+a).html("Enable Drag"))}function editField(t){$(".loading").show(),""!==t&&$.ajax({url:base_url+"Setting/get_field_info",type:"POST",data:{id:t},success:function(t){if(data=JSON.parse(t),fo=[],fov=[],1==data.status){if($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("#feild_id").val(data.data.feild_id),$("#feild_name").val(data.data.feild_name),$("#section option").each(((t,e)=>{$(e).val()==data.data.section_id&&$(e).attr("selected",!0)})),$("#option_type option").each(((t,e)=>{$(e).val()==data.data.feild_type&&$(e).attr("selected",!0)})),"select"==data.data.feild_type||"radio"==data.data.feild_type||"checkbox"==data.data.feild_type){$("#makeSortable").show(),fo=data.data.feild_options.split(","),fov=data.data.feild_options_value.split(","),$("#ovn1").val(fo[0]),$("#ov1").val(fov[0]);let t="";for(let e=1;e<fo.length;e++){let a=Math.floor(1e3*Math.random(0,100));t+='<tr id="id'+a+'">',t+='<td><input type="text" name="option_value_name[]" value="'+fo[e]+'" class="form-control" placeholder="Option value name" required=""></td>',t+='<td><button type="button" onclick="removeOption(\'id'+a+'\')" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>',t+="</td>",t+="</tr>"}$("#options").append(t)}$("#custome").modal("show")}}})}function deleteField(t){let e=confirm("It will delete field Parmamently. Do you want to continue?");""!==t&&e&&($(".loading").show(),$.ajax({url:base_url+"Setting/delete_field",type:"POST",data:{id:t},success:function(e){location.href.includes("add-lead")?location.reload():(data=JSON.parse(e),1==data.status&&($(".loading").hide(),$("tr[data-of='"+t+"']").remove()))}}))}$("#inv_cron_run").click((()=>{$.ajax({url:base_url+"cron/invoice_automate",type:"POST",data:{cron:!0},success:function(t){"run"==t?show_success("Invoice Automate Cron Run Successfully."):show_error("Something went wrong.")}})})),$("#task_cron_run").click((()=>{$.ajax({url:base_url+"cron/notify_task",type:"POST",data:{cron:!0},success:function(t){"run"==t?show_success("Task Notification Cron Run Successfully."):show_error("Something went wrong.")}})})),$("#followup_cron_run").click((()=>{$.ajax({url:base_url+"cron/notify_followup",type:"POST",data:{cron:!0},success:function(t){"run"==t?show_success("Followup Notification Cron Run Successfully."):show_error("Something went wrong.")}})})),$("#exportDB").click((function(){$(".loading").show(),$.ajax({url:base_url+"home/dump_database",type:"POST",data:{dump:!0},success:function(t){data=JSON.parse(t),"success"===data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),row="<tr data-node="+data.f+' style="background:green;">',row+="<td>"+atob(data.f)+"</td>",row+='<td><a class="btn btn-xs btn-success" href=base_url +"resource/dump_file/'+data.f+'" download style="margin-right:5px;"><i class="fa fa-download"></i></a>',row+='<button type="button" class="btn btn-xs btn-success" data-d="'+data.f+'" onclick="importDB(this)" style="margin-right:5px;"><i class="fa fa-upload"></i></button>',row+='<button type="button" class="btn btn-xs btn-danger" data-d="'+data.f+'" onclick="removeDBbckup(this)" style="margin-right:5px;"><i class="fa fa-trash" ></i></button></td>',row+="</tr>",$("#nof").remove(),$("#DBbfiles").prepend(row)):(alert("Opps, something went wrong during export."),$(".loading").hide())}})})),$("#sessionOut").click((function(){$(".loading").show(),$.ajax({url:base_url+"home/sessionOut",type:"POST",data:{action:!0},success:function(t){data=JSON.parse(t),"success"===data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),location.reload()):(alert("Opps, something went wrong."),$(".loading").hide())}})})),$("#test-smtp").submit((function(t){t.preventDefault(),""!=$("#text").val()?($(".loading").show(),$.ajax({url:base_url+"home/test_smtp",type:"POST",data:$("#test-smtp").serialize(),success:function(t){data=JSON.parse(t),"success"==data.data?(show_success("Successfully sent test email."),$(".loading").hide(),$("#test-smtp")[0].reset()):(show_error("SMTP Details is not valid or check company email!"),$(".loading").hide())}})):(show_error("Please enter some text."),$("#text").focus())})),$("#remove_logo").click((()=>{$("#invlogo").attr("src",""),$("#is_remove").val("true")})),$("#invoice_logo").change((function(){let t=$("#invoice_logo").val().split("."),e=t[t.length-1];"jpg"==e||"jpeg"==e||"png"==e?($("#logoError").html(""),$("#is_remove").val("false"),readURL(this)):$("#logoError").html("Image type is not valid!")})),$("#addnewetemp").click((()=>{let t="",e=$(".etemps").length?$(".etemps").length+1:1,a=Math.floor(1e3*Math.random(0,100)),s="id"+a;t+='<div class="panel-group etemps" id="accordion'+s+'">',t+='<div class="panel panel-default">',t+='<div class="panel-heading">',t+='<h4 class="panel-title">',t+='<a href="#'+s+'" data-toggle="collapse" data-parent="#accordion'+s+'">Template '+e+"</a>",t+="</h4>",t+="</div>",t+='<div class="panel-colapse collapse" id="'+s+'">',t+='<div class="form-group row">',t+='<div class="col-sm-3 col-md-2 col-form-label text-right"> <label>Subject :</label></div>',t+='<div class="col-sm-9 col-md-10">',t+='<input class="form-control" type="text" name="subject[]" />',t+="</div>",t+="</div>",t+='<div class="panel-body">',t+='<textarea id="summernote'+s+'" class="notebox" name="content[]"></textarea>',t+='<div class="btn-group pull-right">',t+='<button type="submit" class="btn btn-success">Submit</button>',t+='<button type="button" onclick="removeID('+a+')" class="btn btn-danger">Remove</button>',t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>",$("#emailtemplates").append(t),$("#summernote"+s).summernote()})),$(".summernotebox").summernote(),$("#agentForm").submit((function(t){t.preventDefault(),$(".loading").show(),$.ajax({url:base_url+"agent/add_new",type:"POST",data:$("#agentForm").serialize(),success:function(t){data=JSON.parse(t),"success"==data.data?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("#agentForm")[0].reset(),location.reload()):(alert("Unable to add! Please try again."),$(".loading").hide())}})})),$("#acancel").click((()=>{$("#aaction").html("Add"),$("#aid").val(""),$("#agentForm")[0].reset(),$("#acancel").hide()})),$("#addleadsource").click((function(){$("#lshiddenid").val(""),$("#lead_source").val(""),$("#lead_source").focus()})),$("#add_lead_source").submit((function(t){t.preventDefault(),""==$("#lead_source").val()?$("#lserror").html("Please enter lead source."):($("#lserror").html(""),$(".loading").show(),$.ajax({url:base_url+"option/add_lead_source",type:"POST",data:$("#add_lead_source").serialize(),success:function(t){if(data=JSON.parse(t),"success"==data.data){$("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),"yes"==data.u?$("#lssuccess").html("Updated Successfully."):$("#lssuccess").html("Added Successfully."),setTimeout((()=>{$("#lssuccess").html("")}),1e3),$("#add_lead_source")[0].reset();let t="";t+='<tr data-fire="l'+data.df+'" data-sort="'+data.df+'">',t+='<td><span data-take="l'+data.df+'">'+data.ls+"</span>",t+='<input type="hidden" name="id[]" value="'+data.df+'" />',t+='<input type="hidden" name="index[]" value="'+data.in+'" />',t+='<span class="d-trans">Drag to adjust order</span>',t+="<td>",t+='<button type="button" class="btn btn-info btn-xs" onclick="editLs(\''+data.df+'\');"><i class="fa fa-pencil"></i></button>',t+='<button type="button" style="margin: 0px 3px;" class="btn btn-danger btn-xs" onclick="deleteLs(\''+data.df+'\');"><i class="fa fa-trash-o"></i></button>',t+="</td>",t+="</tr>","yes"==data.u?($("#lshiddenid").val(""),$("span[data-take='l"+data.df+"']").html(data.ls)):$("#lead_source_list").append(t)}else"failed"==data.data&&($("#lserror").html("Something went wrong!"),$(".loading").hide())}}))})),$("#addservice").click((function(){$("#shiddenid").val(""),$("#service_name").val(""),$("#service_name").focus()})),$("#add_service").submit((function(t){t.preventDefault(),""==$("#service_name").val()?$("#serror").html("Please enter service."):($("#serror").html(""),$(".loading").show(),$.ajax({url:base_url+"option/add_service",type:"POST",data:$("#add_service").serialize(),success:function(t){if(data=JSON.parse(t),"success"==data.data){$("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),"yes"==data.u?$("#ssuccess").html("Updated Successfully."):$("#ssuccess").html("Added Successfully."),setTimeout((()=>{$("#ssuccess").html("")}),1e3),$("#add_service")[0].reset();let t="";t+='<tr data-fire="s'+data.df+'" data-sort="'+data.df+'">',t+='<td><span data-take="s'+data.df+'">'+data.ls+"</span>",t+='<input type="hidden" name="id[]" value="'+data.df+'" />',t+='<input type="hidden" name="index[]" value="'+data.in+'" />',t+='<span class="d-trans">Drag to adjust order</span>',t+="<td>",t+='<button type="button" class="btn btn-info btn-xs" onclick="editS(\''+data.df+'\');"><i class="fa fa-pencil"></i></button>',t+='<button type="button" style="margin: 0px 3px;" class="btn btn-danger btn-xs" onclick="deleteS(\''+data.df+'\');"><i class="fa fa-trash-o"></i></button>',t+="</td>",t+="</tr>","yes"==data.u?($("#shiddenid").val(""),$("span[data-take='s"+data.df+"']").html(data.ls)):$("#service_list").append(t)}else"failed"==data.data&&($("#serror").html("Something went wrong!"),$(".loading").hide())}}))})),$("#addstatus").click((function(){$("#sthiddenid").val(""),$("#status_name").val(""),$("#status_name").focus()})),$("#add_status").submit((function(t){t.preventDefault(),""==$("#status_name").val()?$("#sterror").html("Please enter status."):($("#sterror").html(""),$(".loading").show(),$.ajax({url:base_url+"option/add_status",type:"POST",data:$("#add_status").serialize(),success:function(t){if(data=JSON.parse(t),"success"==data.data){$("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),"yes"==data.u?$("#stsuccess").html("Updated Successfully."):$("#stsuccess").html("Added Successfully."),setTimeout((()=>{$("#stsuccess").html("")}),1e3),$("#add_status")[0].reset();let t="";t+='<tr data-fire="st'+data.df+'">',t+='<td><span data-take="st'+data.df+'">'+data.ls+"</span>",t+='<input type="hidden" name="id[]" value="'+data.df+'" />',t+='<input type="hidden" name="index[]" value="'+data.in+'" />',t+='<span class="d-trans">Drag to adjust order</span>',t+="<td>",t+='<button type="button" class="btn btn-info btn-xs" onclick="editSt(\''+data.df+'\');"><i class="fa fa-pencil"></i></button>',t+='<button type="button" style="margin: 0px 3px;" class="btn btn-danger btn-xs" onclick="deleteSt(\''+data.df+'\');"><i class="fa fa-trash-o"></i></button>',t+="</td>",t+="</tr>","yes"==data.u?($("#sthiddenid").val(""),$("span[data-take='st"+data.df+"']").html(data.ls)):$("#status_list").append(t)}else"failed"==data.data&&($("#sterror").html("Something went wrong!"),$(".loading").hide())}}))})),$("#addlostreason").click((function(){$("#lrhiddenid").val(""),$("#lost_reason_name").val(""),$("#lost_reason_name").focus()})),$("#addexpensecategory").click((function(){$("#echiddenid").val(""),$("#expense_category_name").val(""),$("#expense_category_name").focus()})),$("#addtaskstatus").click((function(){$("#tshiddenid").val(""),$("#task_status_name").val(""),$("#task_status_name").focus()})),$("#add_lost_reason").submit((function(t){t.preventDefault(),""==$("#lost_reason_name").val()?$("#lrerror").html("Please enter status."):($("#lrerror").html(""),$(".loading").show(),$.ajax({url:base_url+"option/add_lost_reason",type:"POST",data:$("#add_lost_reason").serialize(),success:function(t){if(data=JSON.parse(t),"success"==data.data){$("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),"yes"==data.u?$("#lrsuccess").html("Updated Successfully."):$("#lrsuccess").html("Added Successfully."),setTimeout((()=>{$("#lrsuccess").html("")}),1e3),$("#add_lost_reason")[0].reset();let t="";t+='<tr data-fire="lr'+data.df+'">',t+='<td><span data-take="lr'+data.df+'">'+data.ls+"</span>",t+='<input type="hidden" name="id[]" value="'+data.df+'" />',t+='<input type="hidden" name="index[]" value="'+data.in+'" />',t+='<span class="d-trans">Drag to adjust order</span>',t+="<td>",t+='<button type="button" class="btn btn-info btn-xs" onclick="editLr(\''+data.df+'\');"><i class="fa fa-pencil"></i></button>',t+='<button type="button" style="margin: 0px 3px;" class="btn btn-danger btn-xs" onclick="deleteLr(\''+data.df+'\');"><i class="fa fa-trash-o"></i></button>',t+="</td>",t+="</tr>","yes"==data.u?($("#lrhiddenid").val(""),$("span[data-take='lr"+data.df+"']").html(data.ls)):$("#lost_reason_list").append(t)}else"failed"==data.data&&($("#lrerror").html("Something went wrong!"),$(".loading").hide())}}))})),$("#add_expense_category").submit((function(t){t.preventDefault(),""==$("#expense_category_name").val()?$("#ecerror").html("Please enter name."):($("#ecerror").html(""),$(".loading").show(),$.ajax({url:base_url+"option/add_expense_category",type:"POST",data:$("#add_expense_category").serialize(),success:function(t){if(data=JSON.parse(t),"success"==data.data){$("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),"yes"==data.u?$("#ecsuccess").html("Updated Successfully."):$("#ecsuccess").html("Added Successfully."),setTimeout((()=>{$("#ecsuccess").html("")}),1e3),$("#add_expense_category")[0].reset();let t="";t+='<tr data-fire="ec'+data.df+'">',t+='<td><span data-take="ec'+data.df+'">'+data.ls+"</span>",t+='<input type="hidden" name="id[]" value="'+data.df+'" />',t+="<td>",t+='<button type="button" class="btn btn-info btn-xs" onclick="editEc(\''+data.df+'\');"><i class="fa fa-pencil"></i></button>',t+='<button type="button" style="margin: 0px 3px;" class="btn btn-danger btn-xs" onclick="deleteEc(\''+data.df+'\');"><i class="fa fa-trash-o"></i></button>',t+="</td>",t+="</tr>","yes"==data.u?($("#echiddenid").val(""),$("span[data-take='ec"+data.df+"']").html(data.ls)):$("#expense_category_list").prepend(t)}else"failed"==data.data&&($("#ecerror").html("Something went wrong!"),$(".loading").hide())}}))})),$("#add_task_status").submit((function(t){t.preventDefault(),""==$("#task_status_name").val()?$("#tserror").html("Please enter status."):($("#tserror").html(""),$(".loading").show(),$.ajax({url:base_url+"option/add_task_status",type:"POST",data:$("#add_task_status").serialize(),success:function(t){if(data=JSON.parse(t),"success"==data.data){$("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),"yes"==data.u?$("#tssuccess").html("Updated Successfully."):$("#tssuccess").html("Added Successfully."),setTimeout((()=>{$("#tssuccess").html("")}),1e3),$("#add_task_status")[0].reset();let t="";t+='<tr data-fire="ts'+data.df+'">',t+='<td><span data-take="ts'+data.df+'">'+data.ls+"</span>",t+='<input type="hidden" name="id[]" value="'+data.df+'" />',t+='<input type="hidden" name="index[]" value="'+data.in+'" />',t+='<span class="d-trans">Drag to adjust order</span>',t+="<td>",t+='<button type="button" class="btn btn-info btn-xs" onclick="editTs(\''+data.df+'\');"><i class="fa fa-pencil"></i></button>',t+='<button type="button" style="margin: 0px 3px;" class="btn btn-danger btn-xs" onclick="deleteTs(\''+data.df+'\');"><i class="fa fa-trash-o"></i></button>',t+="</td>",t+="</tr>","yes"==data.u?($("#tshiddenid").val(""),$("span[data-take='ts"+data.df+"']").html(data.ls)):$("#task_status_list").append(t)}else"failed"==data.data&&($("#tserror").html("Something went wrong!"),$(".loading").hide())}}))})),$("#section").change((function(){"other"==$("#section").val()?$("#newsection").show():$("#newsection").hide()})),$("#lstable").rowSorter({onDrop:function(t,e,a,s){e.getAttribute("data-fire"),$("#lead_source_list > tr").each(((t,e)=>{let a=e.getAttribute("data-fire");$("tr[data-fire='"+a+"'] input[name='index[]']").val(t)}))}}),$("#leadsort").submit((t=>{t.preventDefault(),$(".loading").show(),$.ajax({url:base_url+"Option/sort_option",type:"post",data:$("#leadsort").serialize(),success:function(t){"ok"==t?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3)):(alert("unable to sort"),$(".loading").hide())}})})),$("#stable").rowSorter({onDrop:function(t,e,a,s){e.getAttribute("data-fire"),$("#service_list > tr").each(((t,e)=>{let a=e.getAttribute("data-fire");$("tr[data-fire='"+a+"'] input[name='index[]']").val(t)}))}}),$("#servicesort").submit((t=>{t.preventDefault(),$(".loading").show(),$.ajax({url:base_url+"Option/sort_option",type:"post",data:$("#servicesort").serialize(),success:function(t){"ok"==t?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3)):(alert("unable to sort"),$(".loading").hide())}})})),$("#sttable").rowSorter({onDrop:function(t,e,a,s){e.getAttribute("data-fire"),$("#status_list > tr").each(((t,e)=>{let a=e.getAttribute("data-fire");$("tr[data-fire='"+a+"'] input[name='index[]']").val(t)}))}}),$("#statussort").submit((t=>{t.preventDefault(),$(".loading").show(),$.ajax({url:base_url+"Option/sort_option",type:"post",data:$("#statussort").serialize(),success:function(t){"ok"==t?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3)):(alert("unable to sort"),$(".loading").hide())}})})),$("#lrtable").rowSorter({onDrop:function(t,e,a,s){e.getAttribute("data-fire"),$("#lost_reason_list > tr").each(((t,e)=>{let a=e.getAttribute("data-fire");$("tr[data-fire='"+a+"'] input[name='index[]']").val(t)}))}}),$("#tstable").rowSorter({onDrop:function(t,e,a,s){e.getAttribute("data-fire"),$("#task_status_list > tr").each(((t,e)=>{let a=e.getAttribute("data-fire");$("tr[data-fire='"+a+"'] input[name='index[]']").val(t)}))}}),$("#lrsort").submit((t=>{t.preventDefault(),$(".loading").show(),$.ajax({url:base_url+"Option/sort_option",type:"post",data:$("#lrsort").serialize(),success:function(t){"ok"==t?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3)):(alert("unable to sort"),$(".loading").hide())}})})),$("#tssort").submit((t=>{t.preventDefault(),$(".loading").show(),$.ajax({url:base_url+"Option/sort_option",type:"post",data:$("#tssort").serialize(),success:function(t){"ok"==t?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3)):(alert("unable to sort"),$(".loading").hide())}})})),$(".flsort").submit((t=>{t.preventDefault(),id=t.target.id,$(".loading").show(),$.ajax({url:base_url+"Option/sort_feild",type:"post",data:$("#"+id).serialize(),success:function(t){"ok"==t?($("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3)):(alert("unable to sort"),$(".loading").hide())}})})),$("#osort").click((()=>{$("#makeSortable").toggleClass("option_drag_enable"),$("#makeSortable").hasClass("option_drag_enable")?($(".option_drag_enable").rowSorter(),$("#osort").html("Edit")):($.rowSorter.destroy("#makeSortable"),$("#osort").html("Sort"))})),$("#option_type").change((function(){let t=$("#option_type").val();""!==t&&("select"===t||"radio"===t||"checkbox"===t?$("#makeSortable").show():$("#makeSortable").hide())})),$("#custom_field").submit((function(t){t.preventDefault(),$(".loading").show(),$.ajax({url:base_url+"Setting/add_custom_field",type:"post",cache:!1,data:$("#custom_field").serialize(),success:function(t){data=JSON.parse(t),option="","done"==data.data?($("#salert").show(),data.update?($("#feild_id").val(""),$("#salert").html("Updated Successfully.")):$("#salert").html("Added Successfully."),data.n&&(option+='<tr data-of="'+data.en+'">',option+='<td><span data-take="f'+data.en+'">'+data.n+"</span>",option+='<input type="hidden" name="id[]" value="'+data.en+'" />',option+='<input type="hidden" name="index[]" value="'+data.in+'" />',option+='<span class="d-trans">Drag to adjust order <input type="checkbox" onclick="markRequired(this)" data-mean="'+data.en+'" /></span>',1==data.action_allowed?(option+="<td>",option+='<button type="button" class="btn btn-info btn-xs" onclick="editField(\''+data.en+'\')" data-toggle="modal" data-target="#ordine"><i class="fa fa-pencil"></i></button>',option+='<button type="button" style="margin-left:3px;" onclick="deleteField(\''+data.en+'\')" class="btn btn-danger btn-xs" data-toggle="modal" data-target="#ordine"><i class="fa fa-trash-o"></i></button>',option+="</td>"):option+="<td></td>",option+="</tr>",""==option||data.update||($("#section"+data.section).append(option),0!=$("#forlead").length&&"yes"==$("#forlead").val()&&location.reload())),$("#load-success").show(),setTimeout((()=>{$(".loading").hide(),$("#load-success").hide()}),1e3),$("#options tr:not(:first)").remove(),$("#custom_field")[0].reset(),data.update&&($("span[data-take='f"+data.en+"']").html(data.n),$("#custome").modal("hide")),setTimeout((()=>{$("#salert").hide()}),1e3)):"failed"==data.data?($("#ealert").show(),$("#ealert").html("Data not found."),$(".loading").hide(),setTimeout((()=>{$("#ealert").hide()}),1e3)):($("#ealert").show(),$(".loading").hide(),$("#ealert").html("Something went wrong."),setTimeout((()=>{$("#ealert").hide()}),1e3))}})}));