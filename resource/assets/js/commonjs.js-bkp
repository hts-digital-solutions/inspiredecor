function deleteSelected(e){let t="",l=[];if(0===$(".checkme:checked").length)return alert("Please select items to delete it."),!1;$(".checkme:checked").each((e,t)=>{l.push(t.getAttribute("value"))}),"clients"===e?t=base_url+"client/action?deleteSelected":"product-services"===e?t=base_url+"product/action?deleteSelected":"lead"===e?t=base_url+"lead/action?deleteSelected":"invoice"===e?t=base_url+"invoice/action?deleteSelected":"emails"===e?t=base_url+"client/action?deleteSelectedE":"sms"===e?t=base_url+"client/action?deleteSelectedS":"task"===e&&(t=base_url+"task/deleteSelected"),is=confirm("All Data will be lost related to selected one. Do you want to continue?"),is&&($(".loading").show(),$.ajax({url:t,type:"POST",data:{ids:l},success:function(e){data=JSON.parse(e),"success"==data.data?($("#load-success").show(),location.reload(),setTimeout(()=>{$(".loading").hide(),$("#load-success").hide()},1e3)):($(".loading").hide(),alert("Unable to delete selected list."))}}))}$("#advS").click(()=>{$(".advS").toggle("slow")});$(document).ready(function(){$("#summernote").summernote(),$("#summernote1").summernote(),$("#summernote2").summernote(),$("#summernote3").summernote(),$("#signature").summernote()});function viewThis(i){id=i.getAttribute("data-view"),$("#view_"+id).show(),$("#ew"+id).show()}function closeThis(i,e){$("#view_"+i).hide(),e.style.display="none"}function showRange(){let e=$("#invrtype").val();"createdate"==e&&($(".cdrange").show(),$(".ddrange").hide(),$(".pdrange").hide(),$(".pndrange").hide()),"duedate"==e&&($(".cdrange").hide(),$(".ddrange").show(),$(".pdrange").hide(),$(".pndrange").hide()),"paiddate"==e&&($(".cdrange").hide(),$(".ddrange").hide(),$(".pdrange").show(),$(".pndrange").hide()),"pendingdate"==e&&($(".cdrange").hide(),$(".ddrange").hide(),$(".pdrange").hide(),$(".pndrange").show()),""==e&&($(".cdrange").hide(),$(".ddrange").hide(),$(".pdrange").hide(),$(".pndrange").hide())}$(function(){$("#accordion").accordion()}),$("#followup_date").datetimepicker({timepicker:!0,format:date_php_format,formatTime:"g:i A",step:5,defaultSelect:!1}),$("#crdf").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#crsrcdatef").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#crsrcdatet").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#crdt").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#ccrdatef").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#ccrdatet").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#irdatef").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#erdatef").datetimepicker({format:date_format,timepicker:!1}),$("#erdatet, #paydate").datetimepicker({format:date_format,timepicker:!1}),$("#irdatet").datetimepicker({format:"d-M-Y",timepicker:!1}),$("#invrcdatef").datetimepicker({format:date_format,timepicker:!1}),$("#invrcdatet").datetimepicker({format:date_format,timepicker:!1}),$("#invpndatef").datetimepicker({format:date_format,timepicker:!1}),$("#invpndatet").datetimepicker({format:date_format,timepicker:!1}),$("#invduedatef").datetimepicker({format:date_format,timepicker:!1}),$("#invpdatef").datetimepicker({format:date_format,timepicker:!1}),$("#invpdatet").datetimepicker({format:date_format,timepicker:!1}),$("#invduedatet").datetimepicker({format:date_format,timepicker:!1}),$("#reg_date").datetimepicker({format:date_format,timepicker:!1}),$("#nextduedate").datetimepicker({format:date_format,timepicker:!1}),$("#iduedate").datetimepicker({format:date_format,timepicker:!1}),$("#iduedate2").datetimepicker({format:date_format,timepicker:!1}),$("#smsFrom").datetimepicker({format:date_format,timepicker:!1}),$("#smsTo").datetimepicker({format:date_format,timepicker:!1}),$("#ertable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],sorting:!1,oLanguage:{sSearch:"Quick Search "}}),$("#crsrctable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],ordering:!1,pageLength:"15",oLanguage:{sSearch:"Quick Search "}}),$("#ccrtable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#bckupTable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#loginHisTable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#agentTable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#invRtable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#cirtable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],pageLength:"15",ordering:!1,oLanguage:{sSearch:"Quick Search "}}),$("#srTable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#crtable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],ordering:!1,pageLength:"15",oLanguage:{sSearch:"Quick Search "}}),$("#smsCredit").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#smsSent").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$(".sidebar-menu li a").each(function(){$(this).attr("href")==location.href&&$(this).parent("li").addClass("active")}),$("#irtable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],pageLength:"15",ordering:!1,oLanguage:{sSearch:"Quick Search "}});function showCIRO(){let i=$("#rtype").val();"daily"==i?($("#ciry").show(),$("#cirm").show()):"monthly"==i?($("#ciry").show(),$("#cirm").hide()):($("#ciry").hide(),$("#cirm").hide())}$("#rtype").length&&showCIRO();function markRequired(t){id=t.getAttribute("data-mean"),jid=t.getAttribute("id"),val=$("#"+jid).is(":checked")?1:0,$(".loading").show(),$.ajax({url:base_url+"setting/markRequired",type:"POST",data:{id:id,val:val},success:function(t){data=JSON.parse(t),"success"==data.data?(show_success("Field updated successfully."),$(".loading").hide()):(show_error("Something went wrong!"),$(".loading").hide())}})}$("#liform").submit(function(){$(".loading").show()}),$("#lmform").submit(function(){$(".loading").show()}),$("input").attr("autocomplete","off");function get_cproduct_d(e){id=e.getAttribute("id"),pid=$("#"+id+" option:selected").val(),""!==pid&&($(".loading").show(),$.ajax({url:base_url+"product/getcPdetails",type:"POST",data:{pid:pid},success:function(e){data=JSON.parse(e),"success"==data.data&&($(".loading").hide(),$("#billing option[value="+data.e.billing_cycle+"]").attr("selected",!0),$("#fpay").val(parseInt(data.e.set_up_fee)+parseInt(data.e.payment)),$("#ramount").val(data.e.recurring),$("#nextdue").val(data.nd))}}))}function openSmsM(){$("#smsModal").modal("show")}function sendFsms(){""!==$("#smsC").val()?($(".loading").show(),$.ajax({url:base_url+"lead/send_fsms",type:"POST",data:{sms:$("#smsC").val(),mob:$("#lmobile").val()},success:function(e){data=JSON.parse(e),"success"===data.data?($("#smsC").val(""),$("#smsModal").modal("hide"),$(".loading").hide(),show_success("Message has been send successfully.")):(alert("SMS Failed."),$(".loading").hide())}})):($("#smsC").focus(),alert("Please enter sms text."))}function showView(e,s){let t="";""!==e&&"email"===s&&(t="Email Content"),""!==e&&"sms"===s&&(t="SMS Content"),""!==e&&($(".loading").show(),$.ajax({url:base_url+"client/viewMe",type:"POST",data:{id:e,what:s},success:function(e){data=JSON.parse(e),"success"==data.data?($("#viewModal").modal("show"),$("#viewTitle").html(t),$("#viewContent").html(data.d),$(".loading").hide()):($(".loading").hide(),alert("Fetch Error!"))}}))}function resendOtp(){$(".loading").show(),$.ajax({url:base_url+"home/resentOTP",type:"POST",data:{type:"2sv"},success:function(e){data=JSON.parse(e),"success"===data.data?($("#load-success").show(),setTimeout(()=>{$(".loading").hide(),$("#load-success").hide()},1e3),alert("New OTP has been sent.")):alert("Your resend limit has reached.")}})}$("#updateCp").submit(()=>{$(".loading").show()}),$("#invList").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),$("#sendSmsForm").submit(function(e){e.preventDefault(),""!==$("#sSmsText").val()?($(".loading").show(),$.ajax({url:base_url+"client/send_sms_to_client",type:"POST",data:$("#sendSmsForm").serialize(),success:function(e){data=JSON.parse(e),"success"===data.data?($("#sendSmsForm")[0].reset(),$("#smsModal").modal("hide"),$("#load-success").show(),setTimeout(()=>{$(".loading").hide(),$("#load-success").hide()},1e3)):(alert("SMS Failed."),$(".loading").hide())}})):($("#sSmsText").focus(),alert("Please enter sms text."))}),$("#saveAdminNote").submit(function(e){e.preventDefault(),""!==$("#snoteText").val()?($(".loading").show(),$.ajax({url:base_url+"client/save_anote_to_client",type:"POST",data:$("#saveAdminNote").serialize(),success:function(e){data=JSON.parse(e),"success"===data.data?($("#load-success").show(),setTimeout(()=>{$(".loading").hide(),$("#load-success").hide()},1e3)):(alert("No changes to save."),$(".loading").hide())}})):($("#snoteText").focus(),alert("Please enter note text."))}),$("#txnTable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],oLanguage:{sSearch:"Quick Search "}}),ex_button="<strong>Export </strong>",$(".dt-buttons").prepend(ex_button),$(".dt-buttons").css("display","inline-block"),$(".dt-buttons").css("margin-top","6px"),$(".select2").css("width","100%"),$("#smsSent_filter").hide(),$("#smsSent_wrapper").css("display","contents"),$(function(){$(".check").click(function(){$(".checkme").attr("checked",this.checked)}),$(".checkme").click(function(){$(".checkme").length==$(".checkme:checked").length?$(".check").attr("checked","checked"):$(".check").removeAttr("checked")})}),$("#sms_pack").change(function(){""!==$(this).val()?($("#paymentSms").show(),$("#pamt").html(atob($("#sms_pack option:selected").attr("data"))),$("#pqty").val($("#sms_pack option:selected").text())):$("#paymentSms").hide()});$("#emailCtable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],pageLength:50,oLanguage:{sSearch:"Quick Search "}}),$("#smsCtable").DataTable({dom:"Bfrtip",buttons:["excelHtml5","csvHtml5","pdfHtml5"],pageLength:50,oLanguage:{sSearch:"Quick Search "}});function bestEmp(){$(".loading").show(),$.ajax({url:base_url+"home/getbesclient",type:"post",data:{d:$("#empDur").val()},success:function(s){data=JSON.parse(s),"success"==data.data?($("#bemplist").html(data.d),$("#load-success").show(),setTimeout(()=>{$(".loading").hide(),$("#load-success").hide()},1e3)):(show_error("Unable to fetch data!"),$(".loading").hide())}})}function bestVS(){$(".loading").show(),$.ajax({url:base_url+"home/getbestservice",type:"post",data:{d:$("#sDur").val()},success:function(s){data=JSON.parse(s),"success"==data.data?($("#bvslist").html(data.d),$("#load-success").show(),setTimeout(()=>{$(".loading").hide(),$("#load-success").hide()},1e3)):(show_error("Unable to fetch data!"),$(".loading").hide())}})}function fireFS(){let value=$("#followup_status").val();let text=$("#followup_status option:selected").text();if(value=='5'||text.toLowerCase()=='lost'){$("#lost_reason_id").show()}else{$("#lost_reason_id").hide()}if(text.toLowerCase()=='lost'||text.toLowerCase()=='won'){$("#followup_date").removeAttr("required");$("#followup_desc").removeAttr("required");$("#followup_date").val("");$("#followup_desc").val("")}else{$("#followup_date").attr("required","true");$("#followup_desc").attr("required","true")}};
function resendInv(event,value){event.preventDefault();let invoices=[];invoices.push(value);if(invoices.length===0){alert("Something went wrong!");return false}else{$(".loading").show();$.ajax({url:base_url+"invoice/resend",type:"POST",data:{invoices},success:function(res){if(res=="done"){show_success("Sent Successfully.");$(".loading").hide()}else{show_error("Something went wrong!");$(".loading").hide()}}})}}